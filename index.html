<!doctype html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.4.0/css/ol.css" type="text/css">
    <style>
      body {
        overflow: hidden;
        filter: saturate(100%);
      }
      .map {
        height: 110vh;
        width: 110vw;
        transform: translate(-5vw, -5vh);
      }
      .PopupInfo {
        background-color: rgba(7, 174, 196, 0.8);
        border-radius: 5px;
        color: white;
        font-family: sans-serif;
        transform: translate(-50%, -100%);
        box-shadow: 0px 0px 50px #28B1BD;
        width: 200px;
        text-align: center;
        border: 10px solid rgba(7, 174, 196, 0);
        user-select: none;
        font-style: italic;
      }
      b {
        color: white;
        font-style: normal;
        font-size: 20px;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.4.0/build/ol.js"></script>
    <title>GeoStaff</title>
  </head>
  <body>
    <div id="map" class="map"></div>
    <div id="popup" class="ol-popup">
     <a href="#" id="popup-closer" class="ol-popup-closer"></a>
     <div id="popup-content"></div>
 </div>
    <script type="text/javascript">
      var map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          })
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([-2.109525, 52.811356]),
          zoom: 15
        })
      });

      var Home = new ol.Feature({
                     geometry: new ol.geom.Point(ol.proj.fromLonLat([-2.109525, 52.811356])),
                     description:'Cach no. 1'
                 });

      Home.setId('Home<br></b>This is where you begin<b>');

      var Cach1 = new ol.Feature({
                     geometry: new ol.geom.Point(ol.proj.fromLonLat([-2.110725, 52.821356])),
                     description:'Home'
                 });

      Cach1.setId('Cach1<br></b>The spires center holds the treasure<b>');

      var pStyle = new ol.style.Style({
      image: new ol.style.Circle({
        radius: 7,
        fill: new ol.style.Fill({
            color: 'rgba(255, 244, 43, 0.5)'
        }),
        stroke: new ol.style.Stroke({
          color: '#28B1BD', 
          width: 2
        })
      })
    })

      var layer = new ol.layer.Vector({
         source: new ol.source.Vector({
            features: [
                 Home,
                 Cach1
             ]
         }),
            style: pStyle
     });

     map.addLayer(layer);

     var container = document.getElementById('popup');
     var content = document.getElementById('popup-content');
     var closer = document.getElementById('popup-closer');

     var overlay = new ol.Overlay({
         element: container,
         autoPan: true,
         autoPanAnimation: {
             duration: 250
         }
     });
     map.addOverlay(overlay);

     closer.onclick = function() {
         overlay.setPosition(undefined);
         closer.blur();
         return false;
     };

     var CachName = "";
     map.on('singleclick', function(evt) {             
  var feature = map.forEachFeatureAtPixel(evt.pixel,
    function(feature, layer) {
      CachName = feature.getId();
      console.log("feature",feature.getId());
      return [feature, layer];   
    });                                                           
});

      map.on('singleclick', function (event) {
         if (map.hasFeatureAtPixel(event.pixel) === true) {
             var coordinate = event.coordinate;
                content.innerHTML = '<div class="PopupInfo"><b>'+CachName+'</b></div>';
             overlay.setPosition(coordinate);
         } else {
             overlay.setPosition(undefined);
             closer.blur();
         }
     });


    </script>
  </body>
</html>